<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nouvelle Prompt</title>

    <style>
        body{
          background-color: white !important;
        }
        .contact-us {
          padding: 160px 0px;
          background-repeat: no-repeat;
          background-position: center center;
          background-size: cover;
        }
        
        .contact-us .section-heading h2,
        .contact-us .section-heading h2 em,
        .contact-us .section-heading h2 span {
          color: #fff;
        }
        
        .contact-us .section-heading p {
          color: #fff;
          margin-top: 30px;
        }
        
        form#c .contact-dec {
          position: absolute;
          right: -166px;
          bottom: 0;
        }
        
        form#c .contact-dec img {
          max-width: 178px;
        }
        
        form#c {
          margin-left: 30px;
          position: relative;
          background-color: #fff;
          padding: 60px 30px;
          border-radius: 20px;
        }
        
        
        
        form#c input {
          width: 100%;
          height: 46px;
          border-radius: 33px;
          background-color: #d1f3ff;
          border: none;
          outline: none;
          font-size: 15px;
          font-weight: 300;
          color: #2a2a2a;
          padding: 0px 20px;
          margin-bottom: 20px;
        }
        
        form#c input::placeholder {
          color: #2a2a2a;
        }
        
        form#c textarea {
          width: 100%;
          min-width: 100%;
          max-width: 100%;
          max-height: 180px;
          min-height: 140px;
          height: 140px;
          border-radius: 20px;
          background-color: #d1f3ff;
          border: none;
          outline: none;
          font-size: 15px;
          font-weight: 300;
          color: #2a2a2a;
          padding: 15px 20px;
          margin-bottom: 20px;
        }
        
        form#c textarea::placeholder {
          color: #2a2a2a;
        }
        
        form#c button {
          display: inline-block;
          background-color: #0bd73e;
          font-size: 15px;
          font-weight: 400;
          color: #fff;
          text-transform: capitalize;
          padding: 12px 25px;
          border-radius: 23px;
          letter-spacing: 0.25px;
          border: none;
          outline: none;
          transition: all .3s;
        }
        
        form#c button:hover {
          background-color: #0dfd5d;
        }
        
        
        
        
        .cc .contact-dec {
          position: absolute;
          right: -166px;
          bottom: 0;
        }
        
        .cc .contact-dec img {
          max-width: 178px;
        }
        
        .cc {
          margin-left: 30px;
          position: relative;
          background-color: #fff;
          padding: 60px 30px;
          border-radius: 20px;
        }
        
        .cc {
          margin-left: 30px;
          position: relative;
          background-color: #fff;
          padding: 60px 30px;
          border-radius: 20px;
        }
        
        
        .cc {
          margin-left: 30px;
          position: relative;
          background-color: #fff;
          padding: 60px 30px;
          border-radius: 20px;
        }
        
        .cc input {
          width: 100%;
          height: 46px;
          border-radius: 33px;
          background-color: #d1f3ff;
          border: none;
          outline: none;
          font-size: 15px;
          font-weight: 300;
          color: #2a2a2a;
          padding: 0px 20px;
          margin-bottom: 20px;
        }
        
        .cc input::placeholder {
          color: #2a2a2a;
        }
        
        .cc textarea {
          width: 100%;
          min-width: 100%;
          max-width: 100%;
          max-height: 180px;
          min-height: 140px;
          height: 140px;
          border-radius: 20px;
          background-color: #d1f3ff;
          border: none;
          outline: none;
          font-size: 15px;
          font-weight: 300;
          color: #2a2a2a;
          padding: 15px 20px;
          margin-bottom: 20px;
        }
        
        .cc textarea::placeholder {
          color: #2a2a2a;
        }
        
        .cc button {
          display: inline-block;
          background-color: #f327c0;
          font-size: 15px;
          font-weight: 400;
          color: #fff;
          text-transform: capitalize;
          padding: 12px 25px;
          border-radius: 23px;
          letter-spacing: 0.25px;
          border: none;
          outline: none;
          transition: all .3s;
        }
        
        .cc button:hover {
          background-color: #cc45a3;
        }
        
          </style>
      <meta charset="UTF-8" />
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, shrink-to-fit=no"
      />
  
  
      <link rel="preconnect" href="https://fonts.gstatic.com" />
      <!-- <link
        rel="shortcut icon"
        type="x-icon"
        href="https://39.surge.sh/assets/images/logo1.png"
      /> -->
      <link
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap"
        rel="stylesheet"
      />
      <title>AiCrafters</title>
  
      <link
        href="https://39.surge.sh/vendor/bootstrap/css/bootstrap.min.css"
        rel="stylesheet"
      />
      <link
        rel="stylesheet"
        href="https://39.surge.sh/assets/css/fontawesome.css"
      />
  </head>
  <body>
    <div style="padding:10vh ; ">
    <h1 style="padding-bottom: 5vh;">Enregistrer un nouveau Prompt</h1>
    <form id="textForm" style="display: flex;">
            <div>
        <label for="textData">Ancien Prompt:</label>
        <textarea id="hasuraData" rows="4" cols="50" disabled style="resize: none;"></textarea><br /><br />
      <label for="textData">Entrer Prompt:</label>
      <textarea
        id="textData"
        name="textData"
        rows="4"
        cols="50"
        required
      ></textarea>
    </div>
      <br /><br />
<div style="padding-left: 10vh;">
      <label for="numberBetween0and1">Temperature</label>
      <input
        type="number"
        id="temp"
        name="numberBetween0and1"
        step="0.01"  
        min="0"
        max="1"
        required
      /><br /><br />
    
      <!-- Input for an unlimited number -->
      <label for="unlimitedNumber">Tokens</label>
      <input
        type="number"
        id="token"
        name="token"
      /><br /><br />
      <button style="background-color: rgb(64, 64, 255);color: white;margin: 10vh; border-radius: 10px;border: none;" type="submit">Envoyer</button>
    </div>
      <!-- Green indicator for success -->
      <div id="successIndicator" style="color: green; display: none">
        Data sent successfully!
      </div>
    </form>

    <footer style="padding-top: 10vh;">
        <div class="container">
          <div class="row">
            <div
              class="col-lg-12 wow fadeIn"
              data-wow-duration="1s"
              data-wow-delay="0.25s"
            >
              <div style="display: flex;"><p>AI Crafters 2023 - </p> <a style="color: blue;" href="{% url 'save_audio2' %}">[prompt test]</a></div>
            </div>
          </div>
        </div>
      </footer>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        // Add an event listener to the form for when it's submitted
        document
          .getElementById("textForm")
          .addEventListener("submit", function (event) {
            event.preventDefault(); // Prevent the default form submission
  
            // Get the text data and custom headers from the input fields
            const textData = document.getElementById("textData").value;
  
            // Define the Hasura API URL where you want to send the data
            const hasuraApiUrl =
              "https://registergeerd.hasura.app/api/rest/prompt/newprompt/1/" +
              textData; // Replace with your Hasura API URL
  
            // Create an object with the data you want to send to Hasura
            const token = document.getElementById('token');
            const  temp = document.getElementById('temp');
  
            const config = {
              "content-type": "application/json",
              "x-hasura-admin-secret":
                "i5po5Bap0VZ9YjcuQ0vzxAy7LBzI0XbuvILake89SEqFsQf2S6ok67BaihIeT7wb",
            };
            // Use Axios to send a POST request to the Hasura API with custom headers
            //   axios
            //     .post(hasuraApiUrl, dataToSend, config)
            //     .then(function (response) {
            //       console.log("Data sent successfully:", {
            //   headers: {
            //       'content-type': "application/json",
            //       'x-hasura-admin-secret': "i5po5Bap0VZ9YjcuQ0vzxAy7LBzI0XbuvILake89SEqFsQf2S6ok67BaihIeT7wb" ,
            //   },
            // });
            const reponse = axios({
              method: "post",
              url: `https://registergeerd.hasura.app/api/rest/prompt/newprompt/1/${token.value}/${temp.value}/${textData}`,
              headers: {
                "Content-Type": "application/json",
                "x-hasura-admin-secret":
                  "i5po5Bap0VZ9YjcuQ0vzxAy7LBzI0XbuvILake89SEqFsQf2S6ok67BaihIeT7wb",
              },
              data: {},
            });
            document.getElementById("successIndicator").style.display = "block";
  
            // Handle the response from Hasura here if needed
          })
       
  
          async function fetchDataFromHasura() {
              try {
                  // Make a GET request to your Hasura API endpoint using Axios
                  const response = await axios.get('https://registergeerd.hasura.app/api/rest/getPrompt/1',{headers: {
                "Content-Type": "application/json",
                "x-hasura-admin-secret":
                  "i5po5Bap0VZ9YjcuQ0vzxAy7LBzI0XbuvILake89SEqFsQf2S6ok67BaihIeT7wb",
              },});
                  const data = response.data;
  
                  // Populate the textarea with the received data
                  const hasuraDataTextarea = document.getElementById('hasuraData');
                //   const resp = JSON.stringify(data, null, 2)
                  hasuraDataTextarea.value = data.prompt[0].prompt;
                  document.getElementById('temp').value = data.prompt[0].temp;
                  document.getElementById('token').value = data.prompt[0].token;
  
                  // Disable the textarea
                  hasuraDataTextarea.disabled = true;
              } catch (error) {
                  console.error('Error fetching data from Hasura:', error);
              }
          }
  
          // Call the fetchDataFromHasura function when the page loads
          fetchDataFromHasura();
      </script>
  </body>
</html>
